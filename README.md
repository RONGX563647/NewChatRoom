# Java Socket èŠå¤©å®¤

ä¸€ä¸ªåŸºäº Java Socket çš„ç½‘ç»œèŠå¤©å®¤åº”ç”¨ï¼Œé‡‡ç”¨ C/Sï¼ˆå®¢æˆ·ç«¯/æœåŠ¡ç«¯ï¼‰æ¶æ„ï¼Œæ”¯æŒç§èŠã€ç¾¤èŠã€æ–‡ä»¶ä¼ è¾“ç­‰åŠŸèƒ½ã€‚

![Java](https://img.shields.io/badge/Java-8%2B-blue)
![Swing](https://img.shields.io/badge/UI-Swing-orange)
![License](https://img.shields.io/badge/License-MIT-green)

## åŠŸèƒ½ç‰¹æ€§

- ç”¨æˆ·è®¤è¯
  - ç”¨æˆ·æ³¨å†Œ
  - ç”¨æˆ·ç™»å½•
  - æ‰¾å›å¯†ç 
  - é‡ç½®å¯†ç 

- å³æ—¶é€šè®¯
  - ç§èŠï¼ˆç‚¹å¯¹ç‚¹æ¶ˆæ¯ï¼‰
  - ç¾¤èŠï¼ˆå¤šäººç¾¤ç»„æ¶ˆæ¯ï¼‰
  - åœ¨çº¿ç”¨æˆ·åˆ—è¡¨å®æ—¶æ›´æ–°
  - çª—å£æŠ–åŠ¨æé†’

- æ–‡ä»¶ä¼ è¾“
  - ç§èŠæ–‡ä»¶å‘é€/æ¥æ”¶
  - ç¾¤èŠæ–‡ä»¶å‘é€/æ¥æ”¶

- ç¾¤ç»„ç®¡ç†
  - åˆ›å»ºç¾¤ç»„
  - æœç´¢ç¾¤ç»„
  - åŠ å…¥ç¾¤ç»„
  - ç¾¤ç»„åˆ—è¡¨å±•ç¤º

- ä¸ªæ€§åŒ–è®¾ç½®
  - è‡ªå®šä¹‰èŠå¤©å­—ä½“
  - ç¾åŒ–UIç•Œé¢

## æŠ€æœ¯æ ˆ

- **Java SE** - æ ¸å¿ƒç¼–ç¨‹è¯­è¨€
- **Java Swing** - GUIç•Œé¢å¼€å‘
- **Java Socket** - ç½‘ç»œé€šä¿¡
- **Java IO** - æ•°æ®ä¼ è¾“
- **å¤šçº¿ç¨‹** - å¹¶å‘å¤„ç†

## é¡¹ç›®ç»“æ„

```
NewChatRoom/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ common/                 # å…¬å…±ç±»ï¼ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å…±äº«ï¼‰
â”‚   â”‚   â”œâ”€â”€ Message.java        # æ¶ˆæ¯å®ä½“ç±»
â”‚   â”‚   â””â”€â”€ Group.java          # ç¾¤ç»„å®ä½“ç±»
â”‚   â”œâ”€â”€ server/                 # æœåŠ¡ç«¯ä»£ç 
â”‚   â”‚   â”œâ”€â”€ ChatServer.java     # æœåŠ¡ç«¯ä¸»ç±»
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â””â”€â”€ ServerManager.java
â”‚   â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â”‚   â”œâ”€â”€ ClientHandler.java
â”‚   â”‚   â”‚   â””â”€â”€ MessageHandler.java
â”‚   â”‚   â”œâ”€â”€ managers/
â”‚   â”‚   â”‚   â”œâ”€â”€ UserManager.java
â”‚   â”‚   â”‚   â””â”€â”€ GroupManager.java
â”‚   â”‚   â””â”€â”€ broadcast/
â”‚   â”‚       â””â”€â”€ BroadcastManager.java
â”‚   â””â”€â”€ client/                 # å®¢æˆ·ç«¯ä»£ç 
â”‚       â”œâ”€â”€ ChatClient.java     # å®¢æˆ·ç«¯ä¸»ç±»
â”‚       â”œâ”€â”€ network/
â”‚       â”‚   â””â”€â”€ NetworkManager.java
â”‚       â”œâ”€â”€ handler/
â”‚       â”‚   â””â”€â”€ MessageHandler.java
â”‚       â””â”€â”€ ui/
â”‚           â”œâ”€â”€ ChatMainUI.java
â”‚           â”œâ”€â”€ LoginRegisterUI.java
â”‚           â””â”€â”€ UIComponentFactory.java
â”œâ”€â”€ out/                        # ç¼–è¯‘è¾“å‡ºç›®å½•
â”œâ”€â”€ learn.md                    # ä»0å¼€å§‹å¼€å‘æ•™ç¨‹
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- JDK 8 æˆ–æ›´é«˜ç‰ˆæœ¬
- IntelliJ IDEAï¼ˆæ¨èï¼‰æˆ– Eclipse

### è¿è¡Œæ–¹å¼

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨ IntelliJ IDEA

1. æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹
2. ç¼–è¯‘é¡¹ç›®ï¼ˆBuild â†’ Build Projectï¼‰
3. è¿è¡ŒæœåŠ¡ç«¯ï¼š`å³é”® ChatServer.java â†’ Run`
4. è¿è¡Œå®¢æˆ·ç«¯ï¼š`å³é”® ChatClient.java â†’ Run`ï¼ˆå¯è¿è¡Œå¤šä¸ªå®ä¾‹ï¼‰

#### æ–¹å¼äºŒï¼šå‘½ä»¤è¡Œç¼–è¯‘è¿è¡Œ

1. **ç¼–è¯‘é¡¹ç›®**
```bash
# åˆ›å»ºè¾“å‡ºç›®å½•
mkdir -p out/production/NewChatRoom

# ç¼–è¯‘æ‰€æœ‰Javaæ–‡ä»¶
javac -d out/production/NewChatRoom \
    src/common/*.java \
    src/server/*.java \
    src/server/*/*.java \
    src/client/*.java \
    src/client/*/*.java
```

2. **å¯åŠ¨æœåŠ¡ç«¯**
```bash
cd out/production/NewChatRoom
java server.ChatServer
```

3. **å¯åŠ¨å®¢æˆ·ç«¯**
```bash
cd out/production/NewChatRoom
java client.ChatClient
```

## ä½¿ç”¨è¯´æ˜

### 1. ç™»å½•ç•Œé¢

- è¾“å…¥æœåŠ¡å™¨IPï¼ˆé»˜è®¤ï¼š127.0.0.1ï¼‰
- è¾“å…¥è´¦å·å’Œå¯†ç 
- ç‚¹å‡»"ç™»å½•"è¿›å…¥èŠå¤©å®¤
- æ–°ç”¨æˆ·ç‚¹å‡»"æ³¨å†Œ"åˆ›å»ºè´¦å·

### 2. èŠå¤©ç•Œé¢

- **å·¦ä¾§**ï¼šåœ¨çº¿ç”¨æˆ·åˆ—è¡¨å’Œç¾¤ç»„åˆ—è¡¨
- **ä¸­é—´**ï¼šèŠå¤©æ¶ˆæ¯æ˜¾ç¤ºåŒºåŸŸ
- **åº•éƒ¨**ï¼šæ¶ˆæ¯è¾“å…¥æ¡†å’Œå‘é€æŒ‰é’®
- **é¡¶éƒ¨**ï¼šèŠå¤©ç±»å‹é€‰æ‹©ï¼ˆç§èŠ/ç¾¤èŠï¼‰ã€ç›®æ ‡é€‰æ‹©ã€å­—ä½“è®¾ç½®

### 3. åŠŸèƒ½æ“ä½œ

| åŠŸèƒ½ | æ“ä½œæ–¹å¼ |
|------|----------|
| å‘é€æ¶ˆæ¯ | è¾“å…¥å†…å®¹åæŒ‰å›è½¦æˆ–ç‚¹å‡»å‘é€æŒ‰é’® |
| ç§èŠ | ç‚¹å‡»åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ä¸­çš„ç”¨æˆ· |
| ç¾¤èŠ | ä»ä¸‹æ‹‰æ¡†é€‰æ‹©ç¾¤ç»„ |
| å‘é€æ–‡ä»¶ | ç‚¹å‡»"é€‰æ‹©æ–‡ä»¶"æŒ‰é’® |
| çª—å£æŠ–åŠ¨ | ç‚¹å‡»"æŠ–åŠ¨"æŒ‰é’® |
| åˆ›å»ºç¾¤ç»„ | ç‚¹å‡»"åˆ›å»ºç¾¤"æŒ‰é’® |
| åŠ å…¥ç¾¤ç»„ | ç‚¹å‡»"åŠ å…¥ç¾¤"æŒ‰é’® |

## æ¶ˆæ¯ç±»å‹

```java
public enum Type {
    LOGIN,              // ç™»å½•
    PRIVATE_CHAT,       // ç§èŠ
    GROUP_CHAT,         // ç¾¤èŠ
    ONLINE_NOTIFY,      // ä¸Šçº¿é€šçŸ¥
    OFFLINE_NOTIFY,     // ä¸‹çº¿é€šçŸ¥
    FILE_PRIVATE,       // ç§èŠæ–‡ä»¶
    FILE_GROUP,         // ç¾¤èŠæ–‡ä»¶
    SHAKE,              // çª—å£æŠ–åŠ¨
    CREATE_GROUP,       // åˆ›å»ºç¾¤ç»„
    SEARCH_GROUP,       // æœç´¢ç¾¤ç»„
    JOIN_GROUP,         // åŠ å…¥ç¾¤ç»„
    GROUP_LIST,         // ç¾¤ç»„åˆ—è¡¨
    REGISTER,           // æ³¨å†Œ
    FIND_PASSWORD,      // æ‰¾å›å¯†ç 
    RESET_PASSWORD      // é‡ç½®å¯†ç 
}
```

## ç½‘ç»œæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   Server    â”‚
â”‚  (Swing UI) â”‚  Socket â”‚  (Port 8888)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                â–¼                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Client  â”‚      â”‚ Client  â”‚      â”‚ Client  â”‚
        â”‚ Handler â”‚      â”‚ Handler â”‚      â”‚ Handler â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒç±»è¯´æ˜

### æœåŠ¡ç«¯

| ç±»å | è¯´æ˜ |
|------|------|
| `ChatServer` | æœåŠ¡ç«¯ä¸»ç±»ï¼Œè´Ÿè´£ç›‘å¬ç«¯å£å’Œæ¥å—è¿æ¥ |
| `ClientHandler` | å®¢æˆ·ç«¯å¤„ç†çº¿ç¨‹ï¼Œå¤„ç†å•ä¸ªå®¢æˆ·ç«¯çš„æ¶ˆæ¯ |
| `MessageHandler` | æ¶ˆæ¯å¤„ç†å™¨ï¼Œå¤„ç†å„ç§æ¶ˆæ¯ç±»å‹çš„ä¸šåŠ¡é€»è¾‘ |
| `UserManager` | ç”¨æˆ·ç®¡ç†å™¨ï¼Œç®¡ç†ç”¨æˆ·è®¤è¯ä¿¡æ¯ |
| `GroupManager` | ç¾¤ç»„ç®¡ç†å™¨ï¼Œç®¡ç†ç¾¤ç»„ä¿¡æ¯ |
| `BroadcastManager` | å¹¿æ’­ç®¡ç†å™¨ï¼Œè´Ÿè´£æ¶ˆæ¯å¹¿æ’­ |

### å®¢æˆ·ç«¯

| ç±»å | è¯´æ˜ |
|------|------|
| `ChatClient` | å®¢æˆ·ç«¯ä¸»ç±»ï¼Œç¨‹åºå…¥å£ |
| `NetworkManager` | ç½‘ç»œç®¡ç†å™¨ï¼Œå¤„ç†è¿æ¥å’Œæ¶ˆæ¯æ”¶å‘ |
| `MessageHandler` | æ¶ˆæ¯å¤„ç†å™¨ï¼Œå¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯ |
| `LoginRegisterUI` | ç™»å½•æ³¨å†Œç•Œé¢ |
| `ChatMainUI` | èŠå¤©ä¸»ç•Œé¢ |
| `UIComponentFactory` | UIç»„ä»¶å·¥å‚ï¼Œåˆ›å»ºç¾åŒ–ç»„ä»¶ |

### å…¬å…±ç±»

| ç±»å | è¯´æ˜ |
|------|------|
| `Message` | æ¶ˆæ¯å®ä½“ç±»ï¼Œç”¨äºç½‘ç»œä¼ è¾“ |
| `Group` | ç¾¤ç»„å®ä½“ç±»ï¼ŒåŒ…å«ç¾¤ä¿¡æ¯å’Œæˆå‘˜åˆ—è¡¨ |

## å¼€å‘æ•™ç¨‹

è¯¦ç»†çš„ä»0å¼€å§‹å¼€å‘æ•™ç¨‹è¯·æŸ¥çœ‹ [learn.md](learn.md)ï¼ŒåŒ…å«ï¼š

- åŸºç¡€æ¶æ„æ­å»º
- æœåŠ¡ç«¯å¼€å‘è¯¦è§£
- å®¢æˆ·ç«¯å¼€å‘è¯¦è§£
- åŠŸèƒ½æ‰©å±•å®ç°
- å¸¸è§é—®é¢˜è§£å†³

## å¾…ä¼˜åŒ–é¡¹

- [ ] æ•°æ®åº“æŒä¹…åŒ–ï¼ˆç”¨æˆ·ä¿¡æ¯å’ŒèŠå¤©è®°å½•ï¼‰
- [ ] æ–‡ä»¶æ–­ç‚¹ç»­ä¼ 
- [ ] å›¾ç‰‡å’Œè¡¨æƒ…æ”¯æŒ
- [ ] æ¶ˆæ¯åŠ å¯†ä¼ è¾“ï¼ˆSSL/TLSï¼‰
- [ ] å¿ƒè·³æœºåˆ¶æ£€æµ‹åœ¨çº¿çŠ¶æ€
- [ ] èŠå¤©è®°å½•æœ¬åœ°ä¿å­˜

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºä½ çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤ä½ çš„ä¿®æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ä¸€ä¸ª Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ Issue
- å‘é€é‚®ä»¶

---

**Happy Coding! ğŸš€**

![image-20260131112142608](image-20260131112142608.png)